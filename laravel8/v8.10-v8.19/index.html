<!DOCTYPE html>
<html lang="ja-JP">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/favicon.ico"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({  google_ad_client: "ca-pub-9459277760652211",  enable_page_level_ads: true });</script><title>v8.10-v8.19 | 細かすぎて伝わらないLaravelアップデート情報局</title><meta name="description" content="このサイトはLaravelのCHANGELOGを参考に、追加機能・変更情報をまとめたサイトです">
    <link rel="preload" href="/assets/js/runtime~app.966b1de5.js" as="script"><link rel="preload" href="/assets/css/styles.3e167d6d.css" as="style"><link rel="preload" href="/assets/js/194.5b12b916.js" as="script"><link rel="preload" href="/assets/js/app.440a5a82.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.3e167d6d.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">細かすぎて伝わらないLaravelアップデート情報局</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><a href="/laravel8" class="nav-link router-link-active sidebar-heading sidebar-item active" aria-label="laravel8"><!--[--><!--]--> laravel8 <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/laravel8/v8.0-v8.9/" class="nav-link sidebar-item" aria-label="v8.0-v8.9"><!--[--><!--]--> v8.0-v8.9 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="v8.10-v8.19"><!--[--><!--]--> v8.10-v8.19 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#eloquentやクエリービルダでupsertが使えるように" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Eloquentやクエリービルダでupsertが使えるように"><!--[--><!--]--> Eloquentやクエリービルダでupsertが使えるように <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#バリデーションで倍数のチェックができるように" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="バリデーションで倍数のチェックができるように"><!--[--><!--]--> バリデーションで倍数のチェックができるように <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#マイグレーションで外部キー制約のカラム削除が簡単に" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="マイグレーションで外部キー制約のカラム削除が簡単に"><!--[--><!--]--> マイグレーションで外部キー制約のカラム削除が簡単に <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#eloquentのcastsにencryptedが使えるように" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Eloquentのcastsにencryptedが使えるように"><!--[--><!--]--> Eloquentのcastsにencryptedが使えるように <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#リレーションのクエリにwithmax-withmin-withsum-withavg-メソッドが追加" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="リレーションのクエリにwithMax()|withMin()|withSum()|withAvg()メソッドが追加"><!--[--><!--]--> リレーションのクエリにwithMax()|withMin()|withSum()|withAvg()メソッドが追加 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#eloquentやクエリービルダでexplainが使えるように" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Eloquentやクエリービルダでexplainが使えるように"><!--[--><!--]--> Eloquentやクエリービルダでexplainが使えるように <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#ルーティングに正規表現メソッドが追加" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ルーティングに正規表現メソッドが追加"><!--[--><!--]--> ルーティングに正規表現メソッドが追加 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#eloquentのcollectionにloadmax-loadmin-loadsum-loadavg-メソッド追加。eloquentにloadmax-loadmin-loadsum-loadavg-loadmorphmax-loadmorphmin-loadmorphsum-loadmorphavg-メソッド追加" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="EloquentのCollectionにloadMax()|loadMin()|loadSum()|loadAvg()メソッド追加。EloquentにloadMax()|loadMin()|loadSum()|loadAvg()|loadMorphMax()|loadMorphMin()|loadMorphSum()|loadMorphAvg()メソッド追加"><!--[--><!--]--> EloquentのCollectionにloadMax()|loadMin()|loadSum()|loadAvg()メソッド追加。EloquentにloadMax()|loadMin()|loadSum()|loadAvg()|loadMorphMax()|loadMorphMin()|loadMorphSum()|loadMorphAvg()メソッド追加 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#eloquentのcastsencryptedで使用する暗号鍵を設定できるmodel-encryptusing-が追加" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Eloquentのcastsencryptedで使用する暗号鍵を設定できるModel::encryptUsing()が追加"><!--[--><!--]--> Eloquentのcastsencryptedで使用する暗号鍵を設定できるModel::encryptUsing()が追加 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#httpのresponseを返す際に指定のクッキーを無くすwithoutcookie-メソッドが追加" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="HttpのResponseを返す際に指定のクッキーを無くすwithoutCookie()メソッドが追加"><!--[--><!--]--> HttpのResponseを返す際に指定のクッキーを無くすwithoutCookie()メソッドが追加 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#アップロードファイルのテスト時にexistsと合わせてcontentもチェックできるように" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="アップロードファイルのテスト時にexistsと合わせてcontentもチェックできるように"><!--[--><!--]--> アップロードファイルのテスト時にexistsと合わせてcontentもチェックできるように <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#collectionで複数ソートができるように" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Collectionで複数ソートができるように"><!--[--><!--]--> Collectionで複数ソートができるように <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#artisanを介してdbに接続できるphp-artisan-dbが追加" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="artisanを介してDBに接続できるphp artisan dbが追加"><!--[--><!--]--> artisanを介してDBに接続できるphp artisan dbが追加 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#factoryで、存在する親モデルのインスタンスを紐付けするサポートが追加" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="factoryで、存在する親モデルのインスタンスを紐付けするサポートが追加"><!--[--><!--]--> factoryで、存在する親モデルのインスタンスを紐付けするサポートが追加 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#メール本文の内容をテストするためのメソッドがいくつか追加" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="メール本文の内容をテストするためのメソッドがいくつか追加"><!--[--><!--]--> メール本文の内容をテストするためのメソッドがいくつか追加 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#スケジュール一覧を表示するphp-artisan-schedule-listが追加" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="スケジュール一覧を表示するphp artisan schedule:listが追加"><!--[--><!--]--> スケジュール一覧を表示するphp artisan schedule:listが追加 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/laravel8/v8.10-v8.19/#ジョブデータを暗号化できるように" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ジョブデータを暗号化できるように"><!--[--><!--]--> ジョブデータを暗号化できるように <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/laravel8/v8.20-v8.29/" class="nav-link sidebar-item" aria-label="v8.20-v8.29"><!--[--><!--]--> v8.20-v8.29 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/laravel8/v8.30-v8.39/" class="nav-link sidebar-item" aria-label="v8.30-v8.39"><!--[--><!--]--> v8.30-v8.39 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/laravel8/v8.40-v8.49/" class="nav-link sidebar-item" aria-label="v8.40-v8.49"><!--[--><!--]--> v8.40-v8.49 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="v8-10-v8-19" tabindex="-1"><a class="header-anchor" href="#v8-10-v8-19" aria-hidden="true">#</a> v8.10-v8.19</h1><h2 id="eloquentやクエリービルダでupsertが使えるように" tabindex="-1"><a class="header-anchor" href="#eloquentやクエリービルダでupsertが使えるように" aria-hidden="true">#</a> Eloquentやクエリービルダでupsertが使えるように</h2><ul><li>v8.10.0</li><li>src/Illuminate/Database/Query/Builder.php</li></ul><p>MySQLの場合on duplicate key updateを使っており、uniqueかprimary keyが必要なので注意</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">upsert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;id&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;email&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;taylor@example.com&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;id&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;email&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;dayle@example.com&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;email&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/34698" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/34698<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://readouble.com/laravel/8.x/ja/queries.html#upserts" target="_blank" rel="noopener noreferrer">https://readouble.com/laravel/8.x/ja/queries.html#upserts<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="バリデーションで倍数のチェックができるように" tabindex="-1"><a class="header-anchor" href="#バリデーションで倍数のチェックができるように" aria-hidden="true">#</a> バリデーションで倍数のチェックができるように</h2><ul><li>v8.10.0</li><li>src/Illuminate/Validation/Concerns/ValidatesAttributes.php</li></ul><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">step</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>foo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">rules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">[</span>
		<span class="token string single-quoted-string">&#39;foo&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
			<span class="token string single-quoted-string">&#39;multiple_of:0.5&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/34788" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/34788<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="マイグレーションで外部キー制約のカラム削除が簡単に" tabindex="-1"><a class="header-anchor" href="#マイグレーションで外部キー制約のカラム削除が簡単に" aria-hidden="true">#</a> マイグレーションで外部キー制約のカラム削除が簡単に</h2><ul><li>v8.10.0</li><li>src/Illuminate/Database/Schema/Blueprint.php</li></ul><p>Before</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">AddCategoryIdToPostsTable</span> <span class="token keyword">extends</span> <span class="token class-name">Migration</span>
<span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">down</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">dropForeign</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;category_id&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">dropColumn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;category_id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>After</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">AddCategoryIdToPostsTable</span> <span class="token keyword">extends</span> <span class="token class-name">Migration</span>
<span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">down</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">dropConstrainedForeignId</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;category_id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/34806" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/34806<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="eloquentのcastsにencryptedが使えるように" tabindex="-1"><a class="header-anchor" href="#eloquentのcastsにencryptedが使えるように" aria-hidden="true">#</a> Eloquentのcastsに<code>encrypted</code>が使えるように</h2><ul><li>v8.12.0</li><li>src/Illuminate/Database/Eloquent/Concerns/HasAttributes.php</li></ul><p>以前はアクセサやカスタムキャストを作る必要がありましたが、直接指定できるようになりました</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token string single-quoted-string">&#39;access_token&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;encrypted&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/34937" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/34937<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="リレーションのクエリにwithmax-withmin-withsum-withavg-メソッドが追加" tabindex="-1"><a class="header-anchor" href="#リレーションのクエリにwithmax-withmin-withsum-withavg-メソッドが追加" aria-hidden="true">#</a> リレーションのクエリに<code>withMax()</code>|<code>withMin()</code>|<code>withSum()</code>|<code>withAvg()</code>メソッドが追加</h2><ul><li>v8.12.0</li><li>src/Illuminate/Database/Eloquent/Concerns/QueriesRelationships.php</li></ul><p>発行されるSQLはサブクエリなので注意</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">withCount</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;comments&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">withMax</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;comments&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">withMin</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;comments&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">withSum</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;comments&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">withAvg</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;comments&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/34965" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/34965<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://readouble.com/laravel/8.x/ja/eloquent-relationships.html#other-aggregate-functions" target="_blank" rel="noopener noreferrer">https://readouble.com/laravel/8.x/ja/eloquent-relationships.html#other-aggregate-functions<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="eloquentやクエリービルダでexplainが使えるように" tabindex="-1"><a class="header-anchor" href="#eloquentやクエリービルダでexplainが使えるように" aria-hidden="true">#</a> Eloquentやクエリービルダでexplainが使えるように</h2><ul><li>v8.12.0</li><li>src/Illuminate/Database/Concerns/ExplainsQueries.php</li></ul><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;Illia Sakovich&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">explain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">=&gt;</span> Illuminate\Support\Collection <span class="token punctuation">{</span><span class="token comment">#5348</span>
	 all<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span><span class="token comment">#5342</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;id&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;select_type&quot;</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;SIMPLE&quot;</span><span class="token punctuation">,</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;table&quot;</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;users&quot;</span><span class="token punctuation">,</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;partitions&quot;</span><span class="token punctuation">:</span> <span class="token constant">null</span><span class="token punctuation">,</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;ALL&quot;</span><span class="token punctuation">,</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;possible_keys&quot;</span><span class="token punctuation">:</span> <span class="token constant">null</span><span class="token punctuation">,</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;key&quot;</span><span class="token punctuation">:</span> <span class="token constant">null</span><span class="token punctuation">,</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;key_len&quot;</span><span class="token punctuation">:</span> <span class="token constant">null</span><span class="token punctuation">,</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;ref&quot;</span><span class="token punctuation">:</span> <span class="token constant">null</span><span class="token punctuation">,</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;rows&quot;</span><span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;filtered&quot;</span><span class="token punctuation">:</span> <span class="token number">11.11111164093</span><span class="token punctuation">,</span>
		 <span class="token operator">+</span><span class="token string double-quoted-string">&quot;Extra&quot;</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;Using where&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	 <span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/34969" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/34969<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="ルーティングに正規表現メソッドが追加" tabindex="-1"><a class="header-anchor" href="#ルーティングに正規表現メソッドが追加" aria-hidden="true">#</a> ルーティングに正規表現メソッドが追加</h2><ul><li>v8.12.0</li><li>src/Illuminate/Routing/RouteRegexConstraintTrait.php</li></ul><p><code>whereNumber</code>|<code>whereAlpha</code>|<code>whereAlphaNumeric</code>|<code>whereUuid</code>などが使えるようです</p><p>Before</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;authors/{author}/{book}&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;author&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;[0-9]+&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;book&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;[a-zA-Z]+&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>After</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;authors/{author}/{book}&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">whereNumber</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;author&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">whereString</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;book&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/34997" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/34997<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://readouble.com/laravel/8.x/ja/routing.html#parameters-regular-expression-constraints" target="_blank" rel="noopener noreferrer">https://readouble.com/laravel/8.x/ja/routing.html#parameters-regular-expression-constraints<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="eloquentのcollectionにloadmax-loadmin-loadsum-loadavg-メソッド追加。eloquentにloadmax-loadmin-loadsum-loadavg-loadmorphmax-loadmorphmin-loadmorphsum-loadmorphavg-メソッド追加" tabindex="-1"><a class="header-anchor" href="#eloquentのcollectionにloadmax-loadmin-loadsum-loadavg-メソッド追加。eloquentにloadmax-loadmin-loadsum-loadavg-loadmorphmax-loadmorphmin-loadmorphsum-loadmorphavg-メソッド追加" aria-hidden="true">#</a> EloquentのCollectionに<code>loadMax()</code>|<code>loadMin()</code>|<code>loadSum()</code>|<code>loadAvg()</code>メソッド追加。Eloquentに<code>loadMax()</code>|<code>loadMin()</code>|<code>loadSum()</code>|<code>loadAvg()</code>|<code>loadMorphMax()</code>|<code>loadMorphMin()</code>|<code>loadMorphSum()</code>|<code>loadMorphAvg()</code>メソッド追加</h2><ul><li>v8.13.0</li><li>src/Illuminate/Database/Eloquent/Collection.php</li><li>src/Illuminate/Database/Eloquent/Model.php</li></ul><p>これも便利ですが、サブクエリとして発行されるので注意</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>	<span class="token comment">//Eloquent/Collection</span>

	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadAggregate</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">,</span> <span class="token variable">$function</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadCount</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span> <span class="token comment">//Just modified.</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadMax</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadMin</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadSum</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadAvg</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>	<span class="token comment">//Eloquent/Model</span>

	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadAggregate</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">,</span> <span class="token variable">$function</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadCount</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span> <span class="token comment">//Just modified.</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadMax</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadMin</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadSum</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadAvg</span><span class="token punctuation">(</span><span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadMorphAggregate</span><span class="token punctuation">(</span><span class="token variable">$relation</span><span class="token punctuation">,</span> <span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">,</span> <span class="token variable">$function</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadMorphCount</span><span class="token punctuation">(</span><span class="token variable">$relation</span><span class="token punctuation">,</span> <span class="token variable">$relations</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span> <span class="token comment">//Just modified.</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadMorphMax</span><span class="token punctuation">(</span><span class="token variable">$relation</span><span class="token punctuation">,</span> <span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadMorphMin</span><span class="token punctuation">(</span><span class="token variable">$relation</span><span class="token punctuation">,</span> <span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadMorphSum</span><span class="token punctuation">(</span><span class="token variable">$relation</span><span class="token punctuation">,</span> <span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">loadMorphAvg</span><span class="token punctuation">(</span><span class="token variable">$relation</span><span class="token punctuation">,</span> <span class="token variable">$relations</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>こんな感じで使えます</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>	<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">loadCount</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">loadMax</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/35029" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/35029<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://readouble.com/laravel/8.x/ja/eloquent-relationships.html#deferred-count-loading" target="_blank" rel="noopener noreferrer">https://readouble.com/laravel/8.x/ja/eloquent-relationships.html#deferred-count-loading<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="eloquentのcastsencryptedで使用する暗号鍵を設定できるmodel-encryptusing-が追加" tabindex="-1"><a class="header-anchor" href="#eloquentのcastsencryptedで使用する暗号鍵を設定できるmodel-encryptusing-が追加" aria-hidden="true">#</a> Eloquentのcasts<code>encrypted</code>で使用する暗号鍵を設定できる<code>Model::encryptUsing()</code>が追加</h2><ul><li>v8.14.0</li><li>src/Illuminate/Database/Eloquent/Concerns/HasAttributes.php</li></ul><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Encryption<span class="token punctuation">\</span>Encrypter</span><span class="token punctuation">;</span>

<span class="token variable">$databaseEncryptionKey</span> <span class="token operator">=</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;database.encryption_key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$encrypter</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Encrypter</span><span class="token punctuation">(</span><span class="token variable">$databaseEncryptionKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Model</span><span class="token operator">::</span><span class="token function">encryptUsing</span><span class="token punctuation">(</span><span class="token variable">$encrypter</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/35080" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/35080<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="httpのresponseを返す際に指定のクッキーを無くすwithoutcookie-メソッドが追加" tabindex="-1"><a class="header-anchor" href="#httpのresponseを返す際に指定のクッキーを無くすwithoutcookie-メソッドが追加" aria-hidden="true">#</a> HttpのResponseを返す際に指定のクッキーを無くす<code>withoutCookie()</code>メソッドが追加</h2><ul><li>v8.15.0</li><li>src/Illuminate/Http/ResponseTrait.php</li></ul><p>単純に有効期限切れにする感じです</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>	<span class="token doc-comment comment">/**
	 * Expire a cookie when sending the response.
	 *
	 * <span class="token keyword">@param</span>  <span class="token class-name"><span class="token punctuation">\</span>Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>HttpFoundation<span class="token punctuation">\</span>Cookie<span class="token punctuation">|</span><span class="token keyword">mixed</span></span>  <span class="token parameter">$cookie</span>
	 * <span class="token keyword">@param</span>  <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">|</span><span class="token keyword">null</span></span> <span class="token parameter">$path</span>
	 * <span class="token keyword">@param</span>  <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">|</span><span class="token keyword">null</span></span> <span class="token parameter">$domain</span>
	 * <span class="token keyword">@return</span> $this
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">withoutCookie</span><span class="token punctuation">(</span><span class="token variable">$cookie</span><span class="token punctuation">,</span> <span class="token variable">$path</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token variable">$domain</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_string</span><span class="token punctuation">(</span><span class="token variable">$cookie</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">function_exists</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cookie&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token variable">$cookie</span> <span class="token operator">=</span> <span class="token function">cookie</span><span class="token punctuation">(</span><span class="token variable">$cookie</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2628000</span><span class="token punctuation">,</span> <span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$domain</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">headers</span><span class="token operator">-&gt;</span><span class="token function">setCookie</span><span class="token punctuation">(</span><span class="token variable">$cookie</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><a href="https://github.com/laravel/framework/commit/e9483c441d5f0c8598d438d6024db8b1a7aa55fe" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/commit/e9483c441d5f0c8598d438d6024db8b1a7aa55fe<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="アップロードファイルのテスト時にexistsと合わせてcontentもチェックできるように" tabindex="-1"><a class="header-anchor" href="#アップロードファイルのテスト時にexistsと合わせてcontentもチェックできるように" aria-hidden="true">#</a> アップロードファイルのテスト時にexistsと合わせてcontentもチェックできるように</h2><ul><li>v8.15.0</li><li>src/Illuminate/Filesystem/FilesystemAdapter.php</li></ul><p>Before</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">Storage</span><span class="token operator">::</span><span class="token function">disk</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;reports&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">assertExists</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;foo.csv&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertSame</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;my;csv;content&#39;</span><span class="token punctuation">,</span> <span class="token class-name static-context">Storage</span><span class="token operator">::</span><span class="token function">disk</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;reports&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;foo.csv&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>After</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">Storage</span><span class="token operator">::</span><span class="token function">disk</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;reports&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">assertExists</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;foo.csv&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;my;csv;content&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="collectionで複数ソートができるように" tabindex="-1"><a class="header-anchor" href="#collectionで複数ソートができるように" aria-hidden="true">#</a> Collectionで複数ソートができるように</h2><ul><li>v8.16.0</li><li>src/Illuminate/Collections/Collection.php</li></ul><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$collection</span> <span class="token operator">=</span> <span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Taylor Otwell&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;age&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">34</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Abigail Otwell&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;age&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Taylor Otwell&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;age&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">36</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Abigail Otwell&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;age&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$sorted</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-&gt;</span><span class="token function">sortBy</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;asc&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;age&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;desc&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$sorted</span><span class="token operator">-&gt;</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
	[
		[&#39;name&#39; =&gt; &#39;Abigail Otwell&#39;, &#39;age&#39; =&gt; 32],
		[&#39;name&#39; =&gt; &#39;Abigail Otwell&#39;, &#39;age&#39; =&gt; 30],
		[&#39;name&#39; =&gt; &#39;Taylor Otwell&#39;, &#39;age&#39; =&gt; 36],
		[&#39;name&#39; =&gt; &#39;Taylor Otwell&#39;, &#39;age&#39; =&gt; 34],
	]
*/</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/35277" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/35277<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://readouble.com/laravel/8.x/ja/collections.html#method-sortby" target="_blank" rel="noopener noreferrer">https://readouble.com/laravel/8.x/ja/collections.html#method-sortby<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="artisanを介してdbに接続できるphp-artisan-dbが追加" tabindex="-1"><a class="header-anchor" href="#artisanを介してdbに接続できるphp-artisan-dbが追加" aria-hidden="true">#</a> artisanを介してDBに接続できる<code>php artisan db</code>が追加</h2><ul><li>v8.16.0</li><li>src/Illuminate/Database/Console/DbCommand.php</li></ul><p>mysql-clientなどインストールされている必要があるので注意！</p><p><a href="https://github.com/laravel/framework/pull/35304" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/35304<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="factoryで、存在する親モデルのインスタンスを紐付けするサポートが追加" tabindex="-1"><a class="header-anchor" href="#factoryで、存在する親モデルのインスタンスを紐付けするサポートが追加" aria-hidden="true">#</a> factoryで、存在する親モデルのインスタンスを紐付けするサポートが追加</h2><ul><li>v8.18.0</li><li>src/Illuminate/Database/Eloquent/Factories/Factory.php</li></ul><p>factoryを作成する際にforでは親のfactoryを渡す方法だけでしたが</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Post</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>

<span class="token variable">$posts</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token operator">-&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
			<span class="token operator">-&gt;</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
				<span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Jessica Archer&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>親のモデルインスタンスを渡して紐付けできるように</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$posts</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token operator">-&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
			<span class="token operator">-&gt;</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span>
			<span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/35494" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/35494<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://readouble.com/laravel/8.x/ja/database-testing.html#belongs-to-relationships" target="_blank" rel="noopener noreferrer">https://readouble.com/laravel/8.x/ja/database-testing.html#belongs-to-relationships<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="メール本文の内容をテストするためのメソッドがいくつか追加" tabindex="-1"><a class="header-anchor" href="#メール本文の内容をテストするためのメソッドがいくつか追加" aria-hidden="true">#</a> メール本文の内容をテストするためのメソッドがいくつか追加</h2><ul><li>v8.18.0</li><li>src/Illuminate/Mail/Mailable.php</li></ul><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>InvoicePaid</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">test_mailable_content</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token variable">$mailable</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InvoicePaid</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token variable">$mailable</span><span class="token operator">-&gt;</span><span class="token function">assertSeeInHtml</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">email</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$mailable</span><span class="token operator">-&gt;</span><span class="token function">assertSeeInHtml</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Invoice Paid&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token variable">$mailable</span><span class="token operator">-&gt;</span><span class="token function">assertSeeInText</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">email</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$mailable</span><span class="token operator">-&gt;</span><span class="token function">assertSeeInText</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Invoice Paid&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><a href="https://github.com/laravel/framework/commit/afb858ad9c944bd3f9ad56c3e4485527d77a7327" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/commit/afb858ad9c944bd3f9ad56c3e4485527d77a7327<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://readouble.com/laravel/8.x/ja/mail.html#testing-mailables" target="_blank" rel="noopener noreferrer">https://readouble.com/laravel/8.x/ja/mail.html#testing-mailables<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="スケジュール一覧を表示するphp-artisan-schedule-listが追加" tabindex="-1"><a class="header-anchor" href="#スケジュール一覧を表示するphp-artisan-schedule-listが追加" aria-hidden="true">#</a> スケジュール一覧を表示する<code>php artisan schedule:list</code>が追加</h2><ul><li>v8.19.0</li><li>src/Illuminate/Console/Scheduling/ScheduleListCommand.php</li></ul><p><a href="https://github.com/laravel/framework/pull/35574" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/35574<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="ジョブデータを暗号化できるように" tabindex="-1"><a class="header-anchor" href="#ジョブデータを暗号化できるように" aria-hidden="true">#</a> ジョブデータを暗号化できるように</h2><ul><li>v8.19.0</li><li>src/Illuminate/Contracts/Queue/ShouldBeEncrypted.php</li></ul><p>jobsテーブルのpayloadを見ると大体の内容がわかってしまうが、ShouldBeEncryptedを実装してあげれば暗号可能に</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>ShouldBeEncrypted</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">VerifyUser</span> <span class="token keyword">implements</span> <span class="token class-name">ShouldQueue</span><span class="token punctuation">,</span> ShouldBeEncrypted
<span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token variable">$user</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token variable">$socialSecurityNumber</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$socialSecurityNumber</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">user</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token punctuation">;</span>
		<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">socialSecurityNumber</span> <span class="token operator">=</span> <span class="token variable">$socialSecurityNumber</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><a href="https://github.com/laravel/framework/pull/35527" target="_blank" rel="noopener noreferrer">https://github.com/laravel/framework/pull/35527<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://divinglaravel.com/job-encryption-in-laravel" target="_blank" rel="noopener noreferrer">https://divinglaravel.com/job-encryption-in-laravel<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2021/12/17 15:05:32</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: okdyy75@gmail.com">okdyy75</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/laravel8/v8.0-v8.9/" class="nav-link" aria-label="v8.0-v8.9"><!--[--><!--]--> v8.0-v8.9 <!--[--><!--]--></a></span><span class="next"><a href="/laravel8/v8.20-v8.29/" class="nav-link" aria-label="v8.20-v8.29"><!--[--><!--]--> v8.20-v8.29 <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.966b1de5.js" defer></script><script src="/assets/js/194.5b12b916.js" defer></script><script src="/assets/js/app.440a5a82.js" defer></script>
  </body>
</html>
