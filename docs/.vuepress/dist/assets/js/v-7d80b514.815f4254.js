"use strict";(self.webpackChunklaravel_update_info=self.webpackChunklaravel_update_info||[]).push([[642],{3278:(n,a,s)=>{s.r(a),s.d(a,{data:()=>e});const e={key:"v-7d80b514",path:"/laravel8/v8.20-v8.29/",title:"v8.20-v8.29",lang:"ja-JP",frontmatter:{},excerpt:"",headers:[{level:2,title:"ジョブバッチをクリアできるphp artisan queue:prune-batchesコマンドが追加",slug:"ジョブバッチをクリアできるphp-artisan-queue-prune-batchesコマンドが追加",children:[]},{level:2,title:"クエリービルダに、レコードが1つだけ存在かつそれを取得するsole()メソッドが追加",slug:"クエリービルダに、レコードが1つだけ存在かつそれを取得するsole-メソッドが追加",children:[]},{level:2,title:"throw_if / throw_unless がデフォルトでRuntimeExceptionを投げるように",slug:"throw-if-throw-unless-がデフォルトでruntimeexceptionを投げるように",children:[]},{level:2,title:"並列テストが可能に",slug:"並列テストが可能に",children:[]},{level:2,title:"Listeners, Mailables, NotificationsでShouldBeEncryptedが使えるように",slug:"listeners-mailables-notificationsでshouldbeencryptedが使えるように",children:[]},{level:2,title:"ルーティングにmissing()メソッドが追加",slug:"ルーティングにmissing-メソッドが追加",children:[]},{level:2,title:"Str::markdown(), Stringable::markdown()が追加",slug:"str-markdown-stringable-markdown-が追加",children:[]},{level:2,title:"after columnで複数追加できるように",slug:"after-columnで複数追加できるように",children:[]},{level:2,title:"EloquentのcastにAsArrayObject、AsCollectionが使えるように",slug:"eloquentのcastにasarrayobject、ascollectionが使えるように",children:[]}],filePathRelative:"laravel8/v8.20-v8.29/README.md",git:{updatedTime:1639753532e3,contributors:[{name:"okdyy75",email:"okdyy75@gmail.com",commits:1}]}}},9126:(n,a,s)=>{s.r(a),s.d(a,{default:()=>Y});var e=s(6252);const t=(0,e.uE)('<h1 id="v8-20-v8-29" tabindex="-1"><a class="header-anchor" href="#v8-20-v8-29" aria-hidden="true">#</a> v8.20-v8.29</h1><h2 id="ジョブバッチをクリアできるphp-artisan-queue-prune-batchesコマンドが追加" tabindex="-1"><a class="header-anchor" href="#ジョブバッチをクリアできるphp-artisan-queue-prune-batchesコマンドが追加" aria-hidden="true">#</a> ジョブバッチをクリアできる<code>php artisan queue:prune-batches</code>コマンドが追加</h2><ul><li>v8.21.0</li><li>src/Illuminate/Queue/Console/PruneBatchesCommand.php</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> php artisan queue:prune-batches\n<span class="token number">199</span> entries deleted.\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;queue:prune-batches --hours=48&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',5),l={href:"https://github.com/laravel/framework/pull/35694",target:"_blank",rel:"noopener noreferrer"},p=(0,e.Uk)("https://github.com/laravel/framework/pull/35694"),o={href:"https://readouble.com/laravel/8.x/ja/queues.html#pruning-batches",target:"_blank",rel:"noopener noreferrer"},r=(0,e.Uk)("https://readouble.com/laravel/8.x/ja/queues.html#pruning-batches"),c=(0,e.uE)('<h2 id="クエリービルダに、レコードが1つだけ存在かつそれを取得するsole-メソッドが追加" tabindex="-1"><a class="header-anchor" href="#クエリービルダに、レコードが1つだけ存在かつそれを取得するsole-メソッドが追加" aria-hidden="true">#</a> クエリービルダに、レコードが1つだけ存在かつそれを取得する<code>sole()</code>メソッドが追加</h2><ul><li>v8.23.0</li><li>src/Illuminate/Database/Concerns/BuildsQueries.php</li></ul><p>レコードが存在しない、複数レコードが存在する場合は例外を投げます。 Djangoでは<code>get</code>、Railsでは<code>sole</code>や<code>find_sole_by</code>で存在するそうです</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;test1&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">sole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',4),i={href:"https://github.com/laravel/framework/pull/35869",target:"_blank",rel:"noopener noreferrer"},u=(0,e.Uk)("https://github.com/laravel/framework/pull/35869"),k=(0,e._)("h2",{id:"throw-if-throw-unless-がデフォルトでruntimeexceptionを投げるように",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#throw-if-throw-unless-がデフォルトでruntimeexceptionを投げるように","aria-hidden":"true"},"#"),(0,e.Uk)(" throw_if / throw_unless がデフォルトでRuntimeExceptionを投げるように")],-1),d=(0,e._)("ul",null,[(0,e._)("li",null,"v8.23.0"),(0,e._)("li",null,"src/Illuminate/Support/helpers.php")],-1),m={href:"https://github.com/laravel/framework/pull/35890",target:"_blank",rel:"noopener noreferrer"},h=(0,e.Uk)("https://github.com/laravel/framework/pull/35890"),b=(0,e._)("h2",{id:"並列テストが可能に",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#並列テストが可能に","aria-hidden":"true"},"#"),(0,e.Uk)(" 並列テストが可能に")],-1),g=(0,e._)("ul",null,[(0,e._)("li",null,"v8.25.0"),(0,e._)("li",null,"src/Illuminate/Testing/ParallelRunner.php")],-1),v=(0,e._)("p",null,"詳しい使い方はドキュメントをチェック！",-1),f={href:"https://github.com/laravel/framework/pull/36034",target:"_blank",rel:"noopener noreferrer"},_=(0,e.Uk)("https://github.com/laravel/framework/pull/36034"),w={href:"https://readouble.com/laravel/8.x/ja/testing.html#running-tests-in-parallel",target:"_blank",rel:"noopener noreferrer"},x=(0,e.Uk)("https://readouble.com/laravel/8.x/ja/testing.html#running-tests-in-parallel"),y=(0,e._)("h2",{id:"listeners-mailables-notificationsでshouldbeencryptedが使えるように",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#listeners-mailables-notificationsでshouldbeencryptedが使えるように","aria-hidden":"true"},"#"),(0,e.Uk)(" Listeners, Mailables, NotificationsでShouldBeEncryptedが使えるように")],-1),q=(0,e._)("ul",null,[(0,e._)("li",null,"v8.25.0"),(0,e._)("li",null,"src/Illuminate/Events/CallQueuedListener.php"),(0,e._)("li",null,"src/Illuminate/Mail/SendQueuedMailable.php"),(0,e._)("li",null,"src/Illuminate/Notifications/SendQueuedNotifications.php")],-1),j=(0,e._)("p",null,"v8.19.0でジョブの内容を暗号化するようにリスナー、メール、通知でも使えるようです",-1),U={href:"https://github.com/laravel/framework/pull/36036",target:"_blank",rel:"noopener noreferrer"},E=(0,e.Uk)("https://github.com/laravel/framework/pull/36036"),W=(0,e.uE)('<h2 id="ルーティングにmissing-メソッドが追加" tabindex="-1"><a class="header-anchor" href="#ルーティングにmissing-メソッドが追加" aria-hidden="true">#</a> ルーティングに<code>missing()</code>メソッドが追加</h2><ul><li>v8.26.0</li><li>src/Illuminate/Routing/Middleware/SubstituteBindings.php</li></ul><p>ルートモデルバインディングを使用した際に、該当のデータがない場合にModelNotFoundExceptionが投げられますが、それを任意で処理できるように</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/locations/{location:slug}&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">LocationsController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;show&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n\t<span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;locations.view&#39;</span><span class="token punctuation">)</span>\n\t<span class="token operator">-&gt;</span><span class="token function">missing</span><span class="token punctuation">(</span><span class="token keyword">fn</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Redirect</span><span class="token operator">::</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;locations.index&#39;</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token number">301</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',4),A={href:"https://github.com/laravel/framework/pull/36035",target:"_blank",rel:"noopener noreferrer"},S=(0,e.Uk)("https://github.com/laravel/framework/pull/36035"),C={href:"https://readouble.com/laravel/8.x/ja/routing.html#customizing-missing-model-behavior",target:"_blank",rel:"noopener noreferrer"},I=(0,e.Uk)("https://readouble.com/laravel/8.x/ja/routing.html#customizing-missing-model-behavior"),M=(0,e.uE)('<h2 id="str-markdown-stringable-markdown-が追加" tabindex="-1"><a class="header-anchor" href="#str-markdown-stringable-markdown-が追加" aria-hidden="true">#</a> Str::markdown(), Stringable::markdown()が追加</h2><ul><li>v8.26.0</li><li>src/Illuminate/Support/Str.php</li></ul><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">Str</span><span class="token operator">::</span><span class="token function">markdown</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;# Hello World&#39;</span><span class="token punctuation">)</span>\n<span class="token class-name static-context">Str</span><span class="token operator">::</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;# Hello World&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">markdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>',3),R={href:"https://github.com/laravel/framework/pull/36071",target:"_blank",rel:"noopener noreferrer"},$=(0,e.Uk)("https://github.com/laravel/framework/pull/36071"),D={href:"https://readouble.com/laravel/8.x/ja/helpers.html#method-str-markdown",target:"_blank",rel:"noopener noreferrer"},O=(0,e.Uk)("https://readouble.com/laravel/8.x/ja/helpers.html#method-str-markdown"),B=(0,e.uE)('<h2 id="after-columnで複数追加できるように" tabindex="-1"><a class="header-anchor" href="#after-columnで複数追加できるように" aria-hidden="true">#</a> after columnで複数追加できるように</h2><ul><li>v8.27.0</li><li>src/Illuminate/Database/Schema/Blueprint.php</li></ul><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\t<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;remember_token&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$table</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n\t\t<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;card_brand&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\t<span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;card_last_four&#39;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>',3),L={href:"https://github.com/laravel/framework/pull/36145",target:"_blank",rel:"noopener noreferrer"},N=(0,e.Uk)("https://github.com/laravel/framework/pull/36145"),Q={href:"https://readouble.com/laravel/8.x/ja/migrations.html#column-order",target:"_blank",rel:"noopener noreferrer"},P=(0,e.Uk)("https://readouble.com/laravel/8.x/ja/migrations.html#column-order"),H=(0,e.uE)('<h2 id="eloquentのcastにasarrayobject、ascollectionが使えるように" tabindex="-1"><a class="header-anchor" href="#eloquentのcastにasarrayobject、ascollectionが使えるように" aria-hidden="true">#</a> EloquentのcastにAsArrayObject、AsCollectionが使えるように</h2><ul><li>v8.28.0</li><li>src/Illuminate/Database/Eloquent/Casts/AsArrayObject.php</li><li>src/Illuminate/Database/Eloquent/Casts/AsCollection.php</li></ul><p>castsにarrayを指定すると、jsonやtext型のフィールドに対して配列形式で保存することが可能ですが、AsArrayObjectやAsCollectionを指定することでObjectやCollectionで扱えるようになりました。詳しくはドキュメントをチェック！</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>\n\n<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Models</span><span class="token punctuation">;</span>\n\n<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Eloquent<span class="token punctuation">\\</span>Model</span><span class="token punctuation">;</span>\n\n<span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>\n<span class="token punctuation">{</span>\n\t<span class="token doc-comment comment">/**\n\t * キャストする必要のある属性\n\t *\n\t * <span class="token keyword">@var</span> <span class="token class-name"><span class="token keyword">array</span></span>\n\t */</span>\n\t<span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>\n\t\t<span class="token string single-quoted-string">&#39;options&#39;</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">AsArrayObject</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>\n\t<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div>',4),z={href:"https://github.com/laravel/framework/pull/36245",target:"_blank",rel:"noopener noreferrer"},T=(0,e.Uk)("https://github.com/laravel/framework/pull/36245"),Z={href:"https://readouble.com/laravel/8.x/ja/eloquent-mutators.html#array-and-json-casting",target:"_blank",rel:"noopener noreferrer"},F=(0,e.Uk)("https://readouble.com/laravel/8.x/ja/eloquent-mutators.html#array-and-json-casting"),J={},Y=(0,s(3744).Z)(J,[["render",function(n,a){const s=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[t,(0,e._)("p",null,[(0,e._)("a",l,[p,(0,e.Wm)(s)])]),(0,e._)("p",null,[(0,e._)("a",o,[r,(0,e.Wm)(s)])]),c,(0,e._)("p",null,[(0,e._)("a",i,[u,(0,e.Wm)(s)])]),k,d,(0,e._)("p",null,[(0,e._)("a",m,[h,(0,e.Wm)(s)])]),b,g,v,(0,e._)("p",null,[(0,e._)("a",f,[_,(0,e.Wm)(s)])]),(0,e._)("p",null,[(0,e._)("a",w,[x,(0,e.Wm)(s)])]),y,q,j,(0,e._)("p",null,[(0,e._)("a",U,[E,(0,e.Wm)(s)])]),W,(0,e._)("p",null,[(0,e._)("a",A,[S,(0,e.Wm)(s)])]),(0,e._)("p",null,[(0,e._)("a",C,[I,(0,e.Wm)(s)])]),M,(0,e._)("p",null,[(0,e._)("a",R,[$,(0,e.Wm)(s)])]),(0,e._)("p",null,[(0,e._)("a",D,[O,(0,e.Wm)(s)])]),B,(0,e._)("p",null,[(0,e._)("a",L,[N,(0,e.Wm)(s)])]),(0,e._)("p",null,[(0,e._)("a",Q,[P,(0,e.Wm)(s)])]),H,(0,e._)("p",null,[(0,e._)("a",z,[T,(0,e.Wm)(s)])]),(0,e._)("p",null,[(0,e._)("a",Z,[F,(0,e.Wm)(s)])])],64)}]])},3744:(n,a)=>{a.Z=(n,a)=>{const s=n.__vccOpts||n;for(const[n,e]of a)s[n]=e;return s}}}]);